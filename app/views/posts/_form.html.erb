
<%= form_with  model: post, url: {controller: 'posts', action: 'analysis'} ,local: true do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="form-group">
    <%= f.text_area :body, class: 'form-control', rows: 10, maxlength: "140"%>

    <%= f.select :dominant_arm,[["右投げ","右"],["左投げ","左"]], include_blank: "選択してください"%>
    <%= f.select :pitching_form, Post.pitching_forms.keys.map {|k| [I18n.t("enums.post.pitching_form.#{k}"), k]} ,include_blank: "フォームを選択してください"%>
    <h6>※横からスロー撮影した動画を選ぶと肘に負担がかかっているかどうかを分析できます。</h6>
    <h6>※30MG以下の動画を分析できます。</h6>
    <%= f.file_field :video, :accept => 'video/*' %>
    <%= f.hidden_field :video_cache %>
  </div>
  <div class='mt-3 mb-3'>
    <h6>※分析に最大1分ほどお時間がかかる場合があります。</h6>
    <%= video_tag post.video.url, id:'preview', size: '300x200', autoplay: true, muted: true, controls: true unless post.video.blank?%>
  </div>
  
  <%= f.submit "分析する" ,class: 'btn btn-primary'%>


<% end %>
